import{c as j,u as J,r as d,j as e,g as u,h as X,a as b,W as E,o as $,G as Q,F as Y,S as F,f as Z,R as ee,p as se,q as te,l as ae}from"./index-Du-vsTNH.js";import{c as ie}from"./sanitize-uP-gIDZP.js";import{S as ne}from"./square-check-big-BS40_LTO.js";import{C as re,P as N}from"./play-Blywp2KT.js";import{E as le}from"./eye-mW3LtGl-.js";import{S as ce}from"./settings-X3gmFSmD.js";import{F as oe}from"./flag-15GSzGFn.js";const de=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],pe=j("globe",de);const me=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],he=j("message-circle",me);const ue=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],ge=j("server",ue);const ve=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],xe=j("user-check",ve);const je=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],ye=j("users",je),z=[{id:"TC-001",scenario:"SC-001",title:"Verify CDVR recording from program guide",format:"Given-When-Then",status:"approved",duplicateRisk:!1,similarity:0,given:"User is on the program guide with a valid CDVR subscription",when:"User selects a future program and clicks Record",then:"Recording is scheduled and confirmation is displayed",testData:"Account: CDVR Unlimited, Channel: ESPN HD, Program: Future event +2hrs",assertions:["Recording icon appears on program","My DVR list updated","Storage counter incremented"],automationSteps:['navigate("/guide")','page.click("[data-program-id=future-1]")','page.click("#record-btn")','expect(page.locator(".recording-icon")).toBeVisible()','expect(page.locator("#dvr-list")).toContainText("Future event")'],vptStandard:{preconditions:{featureFlags:[{flag:"enableCDVR",value:"true",dependency:"None"},{flag:"enableProgramGuide",value:"true",dependency:"None"},{flag:"cdvrRecordingLimit",value:"unlimited",dependency:"enableCDVR = true"}],accountType:"Resi â€” CDVR Unlimited package",billCode:"TV Select + CDVR Unlimited (950301)",accountStatus:"Active â€” No billing restrictions"},testSteps:[{step:1,action:"Launch Spectrum TV app and navigate to Program Guide",uiElement:"Bottom Nav â†’ Guide tab",expectedResult:null,isNavigation:!0},{step:2,action:"Scroll to a future program (2+ hours ahead) on ESPN HD channel",uiElement:"Guide grid â†’ Program cell",expectedResult:"Program details overlay appears with Record option visible",isNavigation:!1},{step:3,action:"Press Select/OK on the program to open details",uiElement:"Remote: OK/Select button",expectedResult:"Program detail modal opens showing title, time, channel, and Record CTA button",isNavigation:!1},{step:4,action:'Click "Record" button',uiElement:"Record CTA button in program detail modal",expectedResult:'Recording confirmation toast displayed: "Recording Scheduled"',isNavigation:!1},{step:5,action:"Validate CDVR Recording API call",apiEndpoint:"POST /api/v3/cdvr/recordings",httpCode:201,responseFields:["recordingId","status: scheduled","programId","channelId"],headers:"Authorization: Bearer {token}",isApi:!0,expectedResult:'API returns 201 with recordingId and status "scheduled"'},{step:6,action:"Verify recording icon on program in Guide",uiElement:"Guide grid â†’ Program cell",expectedResult:"Red recording dot icon appears on the program cell in Guide",isNavigation:!1},{step:7,action:"Navigate to My DVR and verify recording listed",uiElement:"Bottom Nav â†’ My DVR tab",expectedResult:'New recording appears in "Scheduled" section with correct program title and time',isNavigation:!1},{step:8,action:"Validate storage counter API",apiEndpoint:"GET /api/v3/cdvr/storage",httpCode:200,responseFields:["usedHours (incremented)","totalHours: 200","remainingHours"],headers:"Authorization: Bearer {token}",isApi:!0,expectedResult:"Storage counter reflects incremented usage"}]}},{id:"TC-002",scenario:"SC-001",title:"Verify CDVR recording playback after completion",format:"Given-When-Then",status:"review",duplicateRisk:!1,similarity:0,given:"A scheduled recording has completed successfully",when:"User navigates to My DVR and selects the recording",then:"Recording plays back with full trick-play support",testData:"Account: CDVR Unlimited, Recorded content: 30min program",assertions:["Playback starts within 3 seconds","FF/RW controls functional","Progress bar accurate"],automationSteps:['navigate("/my-dvr")','page.click("[data-recording-id=rec-1]")','await expect(page.locator("video")).toHaveAttribute("playing", "true")','page.click("#ff-btn")','expect(page.locator(".progress")).toBeVisible()'],vptStandard:{preconditions:{featureFlags:[{flag:"enableCDVR",value:"true",dependency:"None"},{flag:"enableTrickPlay",value:"true",dependency:"enableCDVR = true"},{flag:"cdvrPlaybackDRM",value:"widevine",dependency:"None"}],accountType:"Resi â€” CDVR Unlimited package",billCode:"TV Select + CDVR Unlimited (950301)",accountStatus:"Active â€” No billing restrictions"},testSteps:[{step:1,action:"Launch Spectrum TV app and navigate to My DVR",uiElement:"Bottom Nav â†’ My DVR tab",expectedResult:null,isNavigation:!0},{step:2,action:'Locate completed recording in "Recorded" section',uiElement:"My DVR â†’ Recorded tab",expectedResult:"Completed recording visible with title, duration (30min), and recorded date",isNavigation:!1},{step:3,action:"Select the recording and press Play",uiElement:"Recording card â†’ Play CTA",expectedResult:"Playback starts within 3 seconds. Video player loads with progress bar at 0:00",isNavigation:!1},{step:4,action:"Validate playback start API",apiEndpoint:"POST /api/v3/cdvr/playback/start",httpCode:200,responseFields:["streamUrl","drmLicenseUrl","playbackSessionId"],headers:"Authorization: Bearer {token}",isApi:!0,expectedResult:"API returns 200 with valid streamUrl and DRM license"},{step:5,action:"Press FF (Fast Forward) button on remote",uiElement:"Remote: FF button / Player FF control",expectedResult:"Playback advances at 2x/4x speed. Progress bar updates in real-time. Thumbnail preview shown",isNavigation:!1},{step:6,action:"Press RW (Rewind) button on remote",uiElement:"Remote: RW button / Player RW control",expectedResult:"Playback rewinds at 2x/4x speed. Progress bar updates. Thumbnail preview shown",isNavigation:!1},{step:7,action:"Verify progress bar accuracy at 50% playback",uiElement:"Player progress bar",expectedResult:"Progress bar shows ~15:00 / 30:00. Time display matches actual playback position",isNavigation:!1}]}},{id:"TC-003",scenario:"SC-002",title:"Verify storage full error handling",format:"Step-by-step",status:"draft",duplicateRisk:!0,similarity:82,similarTo:"TC-001",differences:["TC-003 tests error state vs TC-001 tests success state","Different precondition: storage full vs available","TC-003 validates error modal, TC-001 validates recording icon"],given:"User storage is at 100% capacity",when:"User attempts to schedule a new recording",then:"Error message displayed with manage storage option",testData:"Account: CDVR Unlimited at max capacity (200hrs)",assertions:["Error modal displayed","Manage Storage button present","No recording scheduled"],automationSteps:["// Setup: fill storage to max",'api.post("/storage/fill", { hours: 200 })','navigate("/guide")','page.click("[data-program-id=future-1]")','page.click("#record-btn")','expect(page.locator(".error-modal")).toBeVisible()','expect(page.locator("#manage-storage-btn")).toBeEnabled()'],vptStandard:{preconditions:{featureFlags:[{flag:"enableCDVR",value:"true",dependency:"None"},{flag:"cdvrStorageLimit",value:"200",dependency:"enableCDVR = true"},{flag:"enableStorageManagement",value:"true",dependency:"None"}],accountType:"Resi â€” CDVR Unlimited package (storage at 100% capacity)",billCode:"TV Select + CDVR Unlimited (950301)",accountStatus:"Active â€” Storage full (200/200 hrs used)"},testSteps:[{step:1,action:"Ensure account CDVR storage is at 200/200 hours (100% full)",uiElement:"N/A â€” Pre-condition setup",expectedResult:null,isNavigation:!0},{step:2,action:"Launch Spectrum TV app and navigate to Program Guide",uiElement:"Bottom Nav â†’ Guide tab",expectedResult:null,isNavigation:!0},{step:3,action:'Select a future program and click "Record"',uiElement:"Guide â†’ Program cell â†’ Record CTA",expectedResult:'Error modal appears: "Storage Full â€” Unable to schedule recording"',isNavigation:!1},{step:4,action:"Validate error response from Recording API",apiEndpoint:"POST /api/v3/cdvr/recordings",httpCode:409,responseFields:["error: STORAGE_FULL","message","currentUsage: 200","maxCapacity: 200"],headers:"Authorization: Bearer {token}",isApi:!0,expectedResult:"API returns 409 Conflict with error code STORAGE_FULL"},{step:5,action:'Verify "Manage Storage" button is present in error modal',uiElement:"Error modal â†’ Manage Storage CTA",expectedResult:'"Manage Storage" button is visible and enabled in the error modal',isNavigation:!1},{step:6,action:'Click "Manage Storage" button',uiElement:"Manage Storage CTA",expectedResult:"Navigates to My DVR â†’ Storage Management screen showing all recordings with delete options",isNavigation:!1},{step:7,action:"Verify no new recording was scheduled",uiElement:"My DVR â†’ Scheduled tab",expectedResult:"No new recording entry in Scheduled list. Recording count unchanged",isNavigation:!1}]}},{id:"TC-004",scenario:"SC-003",title:"Verify concurrent recording conflict resolution",format:"Given-When-Then",status:"draft",duplicateRisk:!1,similarity:0,given:"User has 2 recordings scheduled at overlapping times",when:"System detects the conflict during scheduling",then:"Conflict notification shown with resolution options",testData:"Account: CDVR Unlimited, 2 programs same timeslot",assertions:["Conflict dialog appears","Both programs listed","Keep/Cancel options available"],automationSteps:['api.post("/recordings", { programId: "p1", time: "20:00" })','api.post("/recordings", { programId: "p2", time: "20:00" })','expect(page.locator(".conflict-dialog")).toBeVisible()','expect(page.locator(".conflict-options")).toHaveCount(2)'],vptStandard:{preconditions:{featureFlags:[{flag:"enableCDVR",value:"true",dependency:"None"},{flag:"enableConflictResolution",value:"true",dependency:"enableCDVR = true"},{flag:"maxConcurrentRecordings",value:"1",dependency:"None"}],accountType:"Resi â€” CDVR Unlimited package",billCode:"TV Select + CDVR Unlimited (950301)",accountStatus:"Active â€” 1 existing recording scheduled at 8:00 PM"},testSteps:[{step:1,action:"Ensure 1 recording is already scheduled at 8:00 PM timeslot",uiElement:"N/A â€” Pre-condition setup",expectedResult:null,isNavigation:!0},{step:2,action:"Navigate to Program Guide and select a different program at 8:00 PM",uiElement:"Guide â†’ Program cell (overlapping timeslot)",expectedResult:"Program detail modal opens with Record option",isNavigation:!1},{step:3,action:'Click "Record" on the overlapping program',uiElement:"Record CTA button",expectedResult:'Conflict resolution dialog appears: "Recording Conflict Detected"',isNavigation:!1},{step:4,action:"Validate conflict detection API",apiEndpoint:"POST /api/v3/cdvr/recordings",httpCode:409,responseFields:["error: CONFLICT","conflictingRecordings[]","resolutionOptions[]"],headers:"Authorization: Bearer {token}",isApi:!0,expectedResult:"API returns 409 with conflicting recording details and resolution options"},{step:5,action:"Verify both programs are listed in conflict dialog",uiElement:"Conflict dialog â†’ Program list",expectedResult:"Both program titles, channels, and times displayed side by side",isNavigation:!1},{step:6,action:'Verify "Keep Both" and "Cancel New" options available',uiElement:"Conflict dialog â†’ Action buttons",expectedResult:'"Keep Existing", "Replace with New", and "Cancel" buttons all visible and enabled',isNavigation:!1}]}}],be=["Given-When-Then","VPT Standard","Step-by-step","BDD","Automation Preview","Step Play"],Ne=(i,c)=>c==="Step-by-step"?{steps:[`1. Precondition: ${i.given}`,`2. Action: ${i.when}`,`3. Verification: ${i.then}`,...i.assertions.map((p,a)=>`${a+4}. Assert: ${p}`)]}:c==="BDD"?{feature:`Feature: ${i.title}`,scenario:`  Scenario: ${i.title}
    Given ${i.given}
    When ${i.when}
    Then ${i.then}${i.assertions.map(p=>`
    And ${p}`).join("")}`}:null;function Ae(){const i=J(),[c,p]=d.useState(z),[a,g]=d.useState(z[0]),[S,I]=d.useState("All"),[m,G]=d.useState("Given-When-Then"),[h,v]=d.useState([]),[l,C]=d.useState(-1),[R,w]=d.useState(!1),[k,T]=d.useState(!1),[A,D]=d.useState(!1),[x,M]=d.useState({"TC-001":[{user:"@sarah.chen",text:"Should we add a timeout assertion for the recording confirmation?",time:"3h ago"}],"TC-003":[{user:"@mike.johnson",text:"This overlaps with TC-001 â€” can we merge the precondition?",time:"1h ago"}]}),[f,P]=d.useState(""),U=s=>v(t=>t.includes(s)?t.filter(n=>n!==s):[...t,s]),B=()=>v(c.map(s=>s.id)),W=()=>{p(s=>s.map(t=>h.includes(t.id)?{...t,status:"approved"}:t)),v([])},O=()=>{p(s=>s.map(t=>h.includes(t.id)?{...t,status:"draft"}:t)),v([])},L=()=>{if(!a)return;w(!0),C(0);const s=["given","when","then",...a.assertions.map((o,r)=>`assert-${r}`)];let t=0;const n=setInterval(()=>{t++,t>=s.length?(clearInterval(n),w(!1)):C(t)},1500)},V=()=>{const s=ie(f);if(!s||!a)return;const t=x[a.id]||[];M({...x,[a.id]:[...t,{user:"@you",text:s,time:"just now"}]}),P("")},y=a?Ne(a,m):null,_=async()=>{T(!0),i.info("AI is generating test cases from approved scenarios...");try{const t=c.map(r=>({id:r.scenario,title:r.title,given:r.given,when:r.when,then:r.then}))[0]||{id:"SC-001",title:"Default scenario",given:"User is logged in",when:"User performs action",then:"Expected result occurs"},o=((await te(t)).testCases||[]).map((r,K)=>({id:`TC-${String(c.length+K+1).padStart(3,"0")}`,scenario:t.id,title:r.title,format:"Given-When-Then",status:"draft",duplicateRisk:!1,similarity:0,given:r.given,when:r.when,then:r.then,testData:r.testData||"",assertions:r.assertions||[],automationSteps:r.automationSteps||[]}));p(r=>[...r,...o]),i.success(`AI generated ${o.length} new test cases`)}catch(s){i.error(`AI generation failed: ${s.message}`)}finally{T(!1)}},H=async()=>{if(a){D(!0),i.info(`AI enhancing ${a.id}...`);try{const s=await ae("Enhance this test case by adding edge cases, improving assertions, and suggesting better test data. Return JSON with fields: given, when, then, testData, assertions (array), automationSteps (array). Only return JSON.",`Test case: ${a.title}
Given: ${a.given}
When: ${a.when}
Then: ${a.then}
Current assertions: ${a.assertions.join(", ")}`);try{const t=JSON.parse(s.reply.replace(/```json\s*/g,"").replace(/```\s*/g,"").trim());p(n=>n.map(o=>o.id===a.id?{...o,given:t.given||o.given,when:t.when||o.when,then:t.then||o.then,testData:t.testData||o.testData,assertions:t.assertions||o.assertions,automationSteps:t.automationSteps||o.automationSteps}:o)),g(n=>({...n,given:t.given||n.given,when:t.when||n.when,then:t.then||n.then,testData:t.testData||n.testData,assertions:t.assertions||n.assertions,automationSteps:t.automationSteps||n.automationSteps})),i.success(`${a.id} enhanced by AI`)}catch{i.info(`AI response: ${s.reply.substring(0,100)}...`)}}catch(s){i.error(`AI enhance failed: ${s.message}`)}finally{D(!1)}}},q=()=>{if(!a)return;let s=`${a.id}: ${a.title}

`;s+=`Given: ${a.given}
When: ${a.when}
Then: ${a.then}

`,s+=`Test Data: ${a.testData}

Assertions:
`,a.assertions.forEach((t,n)=>{s+=`${n+1}. ${t}
`}),a.vptStandard&&(s+=`
Pre-conditions:
`,s+=`Account: ${a.vptStandard.preconditions.accountType}
`,s+=`Bill Code: ${a.vptStandard.preconditions.billCode}

`,s+=`Steps:
`,a.vptStandard.testSteps.forEach(t=>{s+=`${t.step}. ${t.action}`,t.expectedResult&&(s+=` â†’ Expected: ${t.expectedResult}`),s+=`
`})),navigator.clipboard.writeText(s).then(()=>i.success("Steps copied to clipboard")).catch(()=>i.error("Copy failed"))};return e.jsxs("div",{className:"transformation-studio",children:[e.jsxs("section",{className:"grid-4",style:{marginBottom:"1.5rem"},children:[e.jsxs("div",{className:"card stat-card",children:[e.jsx("div",{className:"stat-value animate-count",children:c.length}),e.jsx("div",{className:"stat-label",children:"Test Cases"})]}),e.jsxs("div",{className:"card stat-card",children:[e.jsx("div",{className:"stat-value animate-count",style:{color:"var(--success)"},children:c.filter(s=>s.status==="approved").length}),e.jsx("div",{className:"stat-label",children:"Approved"})]}),e.jsxs("div",{className:"card stat-card",children:[e.jsx("div",{className:"stat-value animate-count",style:{color:"var(--warning)"},children:c.filter(s=>s.status==="review").length}),e.jsx("div",{className:"stat-label",children:"In Review"})]}),e.jsxs("div",{className:"card stat-card",children:[e.jsx("div",{className:"stat-value animate-count",style:{color:"var(--danger)"},children:c.filter(s=>s.duplicateRisk).length}),e.jsx("div",{className:"stat-label",children:"Duplicate Risk"})]})]}),e.jsxs("div",{className:"transform-layout",children:[e.jsxs("section",{className:"card tc-list-panel",children:[e.jsxs("div",{className:"card-header",children:[e.jsx("h3",{className:"card-title",children:"Test Cases"}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[h.length>0&&e.jsxs("div",{className:"batch-actions animate-in",children:[e.jsxs("span",{className:"badge badge-accent",children:[h.length," selected"]}),e.jsxs("button",{className:"btn btn-sm btn-success",onClick:W,children:[e.jsx(u,{size:12})," Approve"]}),e.jsxs("button",{className:"btn btn-sm btn-danger",onClick:O,children:[e.jsx(X,{size:12})," Reject"]}),e.jsx("button",{className:"btn btn-sm btn-secondary",onClick:()=>v([]),children:"Clear"})]}),e.jsxs("button",{className:"btn btn-sm btn-secondary",onClick:B,children:[e.jsx(ne,{size:14})," Select All"]}),e.jsxs("button",{className:"btn btn-sm btn-primary",onClick:_,disabled:k,children:[e.jsx(b,{size:14})," ",k?"Generating...":"Generate from Scenarios"]}),e.jsxs("button",{className:"btn btn-sm btn-secondary",onClick:()=>i.info("Converting all test cases to automation-ready format with Playwright steps..."),children:[e.jsx(E,{size:14})," Make Automation-Ready"]})]})]}),e.jsx("div",{className:"tabs",role:"tablist",children:["All","Given-When-Then","Step-by-step","BDD"].map(s=>e.jsx("button",{role:"tab",className:`tab ${S===s?"active":""}`,onClick:()=>I(s),"aria-selected":S===s,children:s},s))}),e.jsx("div",{className:"tc-list",role:"list",children:c.map(s=>e.jsxs("div",{className:`tc-item ${a?.id===s.id?"selected":""} ${h.includes(s.id)?"tc-checked":""}`,role:"listitem",children:[e.jsx("div",{className:"tc-check",children:e.jsx("input",{type:"checkbox",checked:h.includes(s.id),onChange:()=>U(s.id),"aria-label":`Select ${s.id}`})}),e.jsxs("div",{className:"tc-item-body",onClick:()=>g(s),tabIndex:0,onKeyDown:t=>t.key==="Enter"&&g(s),children:[e.jsxs("div",{className:"tc-item-header",children:[e.jsx("span",{className:"tc-id",children:s.id}),e.jsx("span",{className:`badge badge-${s.status==="approved"?"success":s.status==="review"?"warning":"accent"}`,children:s.status}),s.duplicateRisk&&e.jsxs("span",{className:"badge badge-danger",title:`${s.similarity}% similar to ${s.similarTo}`,children:[e.jsx($,{size:10})," ",s.similarity,"% â†’ ",s.similarTo]})]}),e.jsx("p",{className:"tc-title",children:s.title}),e.jsxs("span",{className:"tc-scenario",children:[e.jsx(Q,{size:12})," ",s.scenario]})]})]},s.id))})]}),e.jsx("section",{className:"card tc-detail-panel",children:a?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"card-header",children:[e.jsxs("h3",{className:"card-title",children:[a.id,": ",a.title]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsxs("button",{className:"btn btn-sm btn-secondary",onClick:q,children:[e.jsx($,{size:14})," Copy Steps"]}),e.jsxs("button",{className:"btn btn-sm btn-primary",onClick:H,disabled:A,children:[e.jsx(b,{size:14})," ",A?"Enhancing...":"AI Enhance"]}),e.jsxs("button",{className:"btn btn-sm btn-success",onClick:()=>p(s=>s.map(t=>t.id===a.id?{...t,status:"approved"}:t)),children:[e.jsx(u,{size:14})," Approve"]})]})]}),e.jsx("div",{className:"format-toggle",children:be.map(s=>e.jsxs("button",{className:`format-toggle-btn ${m===s?"active":""}`,onClick:()=>G(s),children:[s==="Automation Preview"?e.jsx(re,{size:13}):s==="Step Play"?e.jsx(N,{size:13}):e.jsx(le,{size:13})," ",s]},s))}),e.jsxs("div",{className:"tc-detail-content",children:[m==="Given-When-Then"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"tc-format-section",children:[e.jsxs("div",{className:"format-block given",children:[e.jsx("h4",{children:"Given"}),e.jsx("p",{children:a.given})]}),e.jsxs("div",{className:"format-block when",children:[e.jsx("h4",{children:"When"}),e.jsx("p",{children:a.when})]}),e.jsxs("div",{className:"format-block then",children:[e.jsx("h4",{children:"Then"}),e.jsx("p",{children:a.then})]})]}),e.jsxs("div",{className:"tc-section",children:[e.jsxs("h4",{children:[e.jsx(ce,{size:14})," Test Data"]}),e.jsx("div",{className:"test-data-box",children:a.testData})]}),e.jsxs("div",{className:"tc-section",children:[e.jsxs("h4",{children:[e.jsx(u,{size:14})," Assertions"]}),e.jsx("ul",{className:"assertion-list",children:a.assertions.map((s,t)=>e.jsxs("li",{children:[e.jsx(u,{size:12})," ",s]},t))})]})]}),m==="VPT Standard"&&a.vptStandard&&e.jsxs("div",{className:"vpt-standard-view",children:[e.jsxs("div",{className:"format-note",children:[e.jsx(Y,{size:12})," VPT Test Case Standard Format â€” FE Dev & VPT Guidelines"]}),e.jsxs("div",{className:"vpt-section",children:[e.jsxs("h4",{className:"vpt-section-title",children:[e.jsx(F,{size:14})," 1. Pre-conditions"]}),e.jsxs("div",{className:"vpt-subsection",children:[e.jsxs("h5",{children:[e.jsx(oe,{size:12})," TDCS Feature Flag Configuration"]}),e.jsxs("table",{className:"vpt-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Flag Name"}),e.jsx("th",{children:"Value"}),e.jsx("th",{children:"Dependency"})]})}),e.jsx("tbody",{children:a.vptStandard.preconditions.featureFlags.map((s,t)=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("code",{children:s.flag})}),e.jsx("td",{children:e.jsx("span",{className:`badge ${s.value==="true"?"badge-success":"badge-accent"}`,children:s.value})}),e.jsx("td",{children:s.dependency})]},t))})]})]}),e.jsxs("div",{className:"vpt-subsection",children:[e.jsxs("h5",{children:[e.jsx(xe,{size:12})," Account Type Requirements"]}),e.jsxs("div",{className:"vpt-field",children:[e.jsx("span",{className:"vpt-label",children:"Account Type:"})," ",a.vptStandard.preconditions.accountType]}),e.jsxs("div",{className:"vpt-field",children:[e.jsx("span",{className:"vpt-label",children:"Bill Code / Package:"})," ",a.vptStandard.preconditions.billCode]})]}),e.jsxs("div",{className:"vpt-subsection",children:[e.jsxs("h5",{children:[e.jsx(F,{size:12})," Account Status Dependencies"]}),e.jsxs("div",{className:"vpt-field",children:[e.jsx("span",{className:"vpt-label",children:"Status:"})," ",a.vptStandard.preconditions.accountStatus]})]})]}),e.jsxs("div",{className:"vpt-section",children:[e.jsxs("h4",{className:"vpt-section-title",children:[e.jsx(N,{size:14})," 2. Test Steps"]}),e.jsx("div",{className:"vpt-steps",children:a.vptStandard.testSteps.map(s=>e.jsxs("div",{className:`vpt-step ${s.isApi?"vpt-step-api":s.isNavigation?"vpt-step-nav":"vpt-step-func"}`,children:[e.jsx("div",{className:"vpt-step-num",children:s.step}),e.jsxs("div",{className:"vpt-step-body",children:[e.jsxs("div",{className:"vpt-step-action",children:[s.isApi&&e.jsx("span",{className:"badge badge-info",style:{marginRight:"0.5rem"},children:"API"}),s.isNavigation&&e.jsx("span",{className:"badge badge-accent",style:{marginRight:"0.5rem"},children:"NAV"}),!s.isApi&&!s.isNavigation&&e.jsx("span",{className:"badge badge-warning",style:{marginRight:"0.5rem"},children:"FUNC"}),s.action]}),s.uiElement&&e.jsxs("div",{className:"vpt-step-meta",children:[e.jsx(pe,{size:11})," UI Element: ",s.uiElement]}),s.apiEndpoint&&e.jsxs("div",{className:"vpt-step-api-detail",children:[e.jsxs("div",{className:"vpt-step-meta",children:[e.jsx(ge,{size:11})," Endpoint: ",e.jsx("code",{children:s.apiEndpoint})]}),e.jsxs("div",{className:"vpt-step-meta",children:["Expected HTTP: ",e.jsx("span",{className:`badge ${s.httpCode<300?"badge-success":"badge-danger"}`,children:s.httpCode})]}),e.jsxs("div",{className:"vpt-step-meta",children:["Response Fields: ",s.responseFields.map((t,n)=>e.jsx("code",{style:{marginRight:"0.25rem"},children:t},n))]}),s.headers&&e.jsxs("div",{className:"vpt-step-meta",children:["Headers: ",e.jsx("code",{children:s.headers})]})]}),s.expectedResult&&e.jsxs("div",{className:"vpt-expected",children:[e.jsx(u,{size:11})," ",e.jsx("strong",{children:"Expected:"})," ",s.expectedResult]}),s.isNavigation&&!s.expectedResult&&e.jsx("div",{className:"vpt-expected vpt-expected-nav",children:e.jsx("em",{children:"Navigation step â€” expected result omitted per VPT guidelines"})})]})]},s.step))})]})]}),m==="Step-by-step"&&y&&e.jsxs("div",{className:"step-by-step-view",children:[e.jsxs("div",{className:"format-note",children:[e.jsx(b,{size:12})," Auto-converted from Given-When-Then format"]}),e.jsx("ol",{className:"step-list",children:y.steps.map((s,t)=>e.jsx("li",{children:s},t))})]}),m==="BDD"&&y&&e.jsxs("div",{className:"bdd-view",children:[e.jsxs("div",{className:"format-note",children:[e.jsx(b,{size:12})," Auto-converted to Gherkin/BDD syntax"]}),e.jsx("pre",{className:"bdd-code",children:y.scenario})]}),m==="Automation Preview"&&e.jsxs("div",{className:"automation-preview",children:[e.jsxs("div",{className:"auto-header",children:[e.jsx("span",{className:"badge badge-accent",children:"Playwright"}),e.jsx("span",{className:"badge badge-info",children:"TypeScript"})]}),e.jsx("pre",{className:"auto-code",children:`test('${a.title}', async ({ page }) => {
${a.automationSteps.map(s=>`  ${s};`).join(`
`)}
});`})]}),m==="Step Play"&&a&&e.jsxs("div",{className:"step-play-view",children:[e.jsxs("div",{className:"format-note",children:[e.jsx(N,{size:12})," LLM-simulated step-by-step execution preview"]}),!R&&l===-1&&e.jsxs("button",{className:"btn btn-primary step-play-start",onClick:L,children:[e.jsx(N,{size:14})," Start Simulation"]}),e.jsxs("div",{className:"play-steps",children:[e.jsxs("div",{className:`play-step ${l>=0?"play-active":""} ${l>0?"play-done":""}`,children:[e.jsx("div",{className:"play-step-label",children:"GIVEN"}),e.jsx("div",{className:"play-step-text",children:a.given}),l===0&&e.jsx("div",{className:"play-sim",children:"ðŸ–¥ï¸ Simulating: User on program guide, subscription verified..."})]}),e.jsxs("div",{className:`play-step ${l>=1?"play-active":""} ${l>1?"play-done":""}`,children:[e.jsx("div",{className:"play-step-label",children:"WHEN"}),e.jsx("div",{className:"play-step-text",children:a.when}),l===1&&e.jsx("div",{className:"play-sim",children:"ðŸ–±ï¸ Simulating: Click action on Record button..."})]}),e.jsxs("div",{className:`play-step ${l>=2?"play-active":""} ${l>2?"play-done":""}`,children:[e.jsx("div",{className:"play-step-label",children:"THEN"}),e.jsx("div",{className:"play-step-text",children:a.then}),l===2&&e.jsx("div",{className:"play-sim",children:"âœ… Verifying: Confirmation dialog rendered..."})]}),a.assertions.map((s,t)=>e.jsxs("div",{className:`play-step ${l>=3+t?"play-active":""} ${l>3+t?"play-done":""}`,children:[e.jsxs("div",{className:"play-step-label",children:["ASSERT ",t+1]}),e.jsx("div",{className:"play-step-text",children:s}),l===3+t&&e.jsx("div",{className:"play-sim",children:"ðŸ” Checking assertion..."})]},t))]}),!R&&l>-1&&e.jsxs("div",{className:"play-result",children:[e.jsx(u,{size:14})," All steps passed simulation. Ready for execution."]})]}),a.duplicateRisk&&e.jsxs("div",{className:"duplicate-detail",children:[e.jsx(Z,{size:16}),e.jsxs("div",{children:[e.jsxs("strong",{children:[a.similarity,"% semantic similarity with ",e.jsx("button",{className:"dup-link",onClick:()=>{const s=c.find(t=>t.id===a.similarTo);s&&g(s)},children:a.similarTo})]}),e.jsx("ul",{className:"diff-list",children:a.differences?.map((s,t)=>e.jsx("li",{children:s},t))}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginTop:"0.5rem"},children:[e.jsxs("button",{className:"btn btn-sm btn-secondary",onClick:()=>{const s=c.find(t=>t.id===a.similarTo);s&&g(s)},children:[e.jsx(ee,{size:12})," View ",a.similarTo]}),e.jsx("button",{className:"btn btn-sm btn-secondary",children:"Dismiss"})]})]})]}),e.jsxs("div",{className:"tc-section",children:[e.jsxs("h4",{children:[e.jsx(he,{size:14})," Comments & Discussion"]}),e.jsxs("div",{className:"comments-thread",children:[(x[a.id]||[]).map((s,t)=>e.jsxs("div",{className:"comment-item",children:[e.jsx("span",{className:"comment-user",children:s.user}),e.jsx("span",{className:"comment-time",children:s.time}),e.jsx("p",{className:"comment-text",children:s.text})]},t)),(!x[a.id]||x[a.id].length===0)&&e.jsx("p",{className:"comment-empty",children:"No comments yet. Start a discussion."}),e.jsxs("div",{className:"comment-input-row",children:[e.jsx("input",{type:"text",className:"comment-input",placeholder:"Add a comment... (use @ to mention)",value:f,onChange:s=>P(s.target.value),onKeyDown:s=>s.key==="Enter"&&V()}),e.jsx("button",{className:"btn btn-sm btn-primary",onClick:V,disabled:!f.trim(),children:e.jsx(se,{size:12})})]})]})]}),e.jsxs("div",{className:"tc-section",children:[e.jsxs("h4",{children:[e.jsx(ye,{size:14})," Review Workflow"]}),e.jsxs("div",{className:"workflow-steps",children:[e.jsxs("div",{className:"workflow-step completed",children:[e.jsx("div",{className:"step-dot"}),e.jsx("span",{children:"Draft"})]}),e.jsxs("div",{className:`workflow-step ${a.status!=="draft"?"completed":"current"}`,children:[e.jsx("div",{className:"step-dot"}),e.jsx("span",{children:"Review"})]}),e.jsxs("div",{className:`workflow-step ${a.status==="approved"?"completed":""}`,children:[e.jsx("div",{className:"step-dot"}),e.jsx("span",{children:"Approved"})]})]})]})]})]}):e.jsxs("div",{className:"empty-state",children:[e.jsx(E,{size:48}),e.jsx("p",{children:"Select a test case to view details"})]})})]})]})}export{Ae as default};
